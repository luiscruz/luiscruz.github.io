!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.wdk=t()}}(function(){return function t(e,r,n){function i(u,s){if(!r[u]){if(!e[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[u]={exports:{}};e[u][0].call(f.exports,function(t){var r=e[u][1][t];return i(r?r:t)},f,f.exports,t,e,r,n)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<n.length;u++)i(n[u]);return i}({1:[function(t,e,r){"use strict";var n=t("./wikidata_time_to_date_object"),i={};i.isNumericId=function(t){return/^[0-9]+$/.test(t)},i.isEntityId=function(t){return/^(Q|P)[0-9]+$/.test(t)},i.isItemId=function(t){return/^Q[0-9]+$/.test(t)},i.isPropertyId=function(t){return/^P[0-9]+$/.test(t)},i.getNumericId=function(t){if(!i.isEntityId(t))throw new Error("invalid wikidata id: "+t);return t.replace(/Q|P/,"")},i.wikidataTimeToDateObject=n;var o=function(t){return function(e){try{return t(e)}catch(t){return e}}},u=function(t){return n(t).getTime()},s=function(t){return n(t).toISOString()};i.wikidataTimeToEpochTime=o(u),i.wikidataTimeToISOString=o(s),e.exports=i},{"./wikidata_time_to_date_object":7}],2:[function(t,e,r){"use strict";var n=t("./helpers"),i=n.wikidataTimeToISOString,o=n.wikidataTimeToEpochTime,u=function(t){return t.value},s=function(t){return t.value.text},a=function(t,e){return f(t,e.entityPrefix)},l=function(t,e){return f(t,e.propertyPrefix)},f=function(t,e){var r=t.value.id;return"string"==typeof e?e+":"+r:r},c=function(t){return parseFloat(t.value.amount)},p=function(t){return[t.value.latitude,t.value.longitude]},y=function(t,e){return d(e.timeConverter)(t.value.time)},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";return v[t]},m=function(t){return t},v={iso:i,epoch:o,none:m},b={string:u,commonsMedia:u,url:u,"external-id":u,math:u,monolingualtext:s,"wikibase-item":a,"wikibase-property":l,time:y,quantity:c,"globe-coordinate":p};e.exports=function(t,e,r){return b[t](e,r)}},{"./helpers":1}],3:[function(t,e,r){"use strict";var n=t("./simplify_entity");e.exports={wd:{entities:function t(e){e=e.body||e;var r=e,t=r.entities;return Object.keys(t).forEach(function(e){t[e]=n(t[e])}),t}}}},{"./simplify_entity":5}],4:[function(t,e,r){"use strict";var n=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("./parse_claim"),u=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=f(r),o=i.propertyPrefix,u={};for(var a in t){var l=t[a];o&&(a=o+":"+a),u[a]=s.apply(void 0,[l].concat(r))}return u},s=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.map(function(t){return l.apply(void 0,[t].concat(r))}).filter(a)},a=function(t){return null!=t},l=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r=f(r);var i,s,a,l=r,c=l.keepQualifiers,p=t.mainsnak,y=t.qualifiers;if(p){if(i=p.datatype,s=p.datavalue,!s)return null}else{if(!t||!t.datavalue)return null;s=t.datavalue,i=t.datatype,a=!0}var d=o(i,s,r);return!c||a?d:{value:d,qualifiers:u(y,r)}},f=function(t){if(null==t)return{};if(t[0]&&"object"===i(t[0]))return t[0];var e=n(t,3),r=e[0],o=e[1],u=e[2];return{entityPrefix:r,propertyPrefix:o,keepQualifiers:u}};e.exports={simplifyClaims:u,simplifyPropertyClaims:s,simplifyClaim:l}},{"./parse_claim":2}],5:[function(t,e,r){"use strict";var n=t("./simplify_claims"),i=n.simplifyClaims,o=t("./simplify_text_attributes");e.exports=function(t){return{id:t.id,type:t.type,modified:t.modified,labels:o.labels(t.labels),descriptions:o.descriptions(t.descriptions),aliases:o.aliases(t.aliases),claims:i(t.claims),sitelinks:o.sitelinks(t.sitelinks)}}},{"./simplify_claims":4,"./simplify_text_attributes":6}],6:[function(t,e,r){"use strict";var n=function(t,e){return function(r){var n={};return Object.keys(r).forEach(function(o){var u=r[o];n[o]=t?u.map(i):u[e]}),n}},i=function(t){return t.value},o=n(!1,"value");e.exports={labels:o,descriptions:o,aliases:n(!0,"value"),sitelinks:n(!1,"title")}},{}],7:[function(t,e,r){"use strict";e.exports=function(t){var e=t[0],r=t.slice(1),i=n(e,r);return"Invalid Date"===i.toString()?u(e,r):i};var n=function(t,e){return"-"===t?o(e):i(e)},i=function(t){return new Date(t)},o=function(t){var e="-00"+t;return new Date(e)},u=function(t,e){var r=e.split("T")[0].split("-")[0];return n(t,r)}},{}],8:[function(t,e,r){"use strict";var n=e.exports={};n.searchEntities=t("./queries/search_entities"),n.getEntities=t("./queries/get_entities"),n.getManyEntities=t("./queries/get_many_entities"),n.getWikidataIdsFromSitelinks=t("./queries/get_wikidata_ids_from_sitelinks"),n.sparqlQuery=t("./queries/sparql_query"),n.getReverseClaims=t("./queries/get_reverse_claims"),n.parse=t("./helpers/parse_responses");var i=t("./helpers/simplify_claims"),o=t("./queries/simplify_sparql_results");n.simplify=t("../lib/helpers/simplify_text_attributes"),n.simplify.entity=t("../lib/helpers/simplify_entity"),n.simplify.claim=i.simplifyClaim,n.simplify.propertyClaims=i.simplifyPropertyClaims,n.simplify.claims=i.simplifyClaims,n.simplify.sparqlResults=o,n.simplifySparqlResults=t("./queries/simplify_sparql_results"),Object.assign(n,i),n.getWikidataIdsFromWikipediaTitles=n.getWikidataIdsFromSitelinks,Object.assign(n,t("./helpers/helpers"))},{"../lib/helpers/simplify_entity":5,"../lib/helpers/simplify_text_attributes":6,"./helpers/helpers":1,"./helpers/parse_responses":3,"./helpers/simplify_claims":4,"./queries/get_entities":9,"./queries/get_many_entities":10,"./queries/get_reverse_claims":11,"./queries/get_wikidata_ids_from_sitelinks":12,"./queries/search_entities":13,"./queries/simplify_sparql_results":14,"./queries/sparql_query":15}],9:[function(t,e,r){"use strict";var n=t("../utils/build_url"),i=t("../utils/utils"),o=i.isPlainObject,u=i.forceArray,s=i.shortLang;e.exports=function(t,e,r,i){if(o(t)){var a=t;t=a.ids,e=a.languages,r=a.props,i=a.format}if(i=i||"json",!(t&&t.length>0))throw new Error("no id provided");t=u(t),t.length>50&&console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\n      this request won't get all the desired entities.\n      You can use getManyEntities instead to generate several request urls\n      to work around this limitation");var l={action:"wbgetentities",ids:t.join("|"),format:i};return e&&(e=u(e).map(s),l.languages=e.join("|")),r&&r.length>0&&(l.props=u(r).join("|")),n(l)}},{"../utils/build_url":16,"../utils/utils":18}],10:[function(t,e,r){"use strict";function n(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var i=n(["getManyEntities expects an array of ids"],["getManyEntities expects an array of ids"]),o=t("./get_entities"),u=t("../utils/utils"),s=u.isPlainObject;e.exports=function(t,e,r,n){if(s(t)){var u=t;t=u.ids,e=u.languages,r=u.props,n=u.format}if(!(t instanceof Array))throw new(Error(i));return a(t).map(function(t){return o(t,e,r,n)})};var a=function(t){for(var e=[];t.length>0;){var r=t.slice(0,50);t=t.slice(50),e.push(r)}return e}},{"../utils/utils":18,"./get_entities":9}],11:[function(t,e,r){"use strict";function n(t){return u.isItemId(t)?t="wd:"+t:"string"==typeof t&&(t="'"+t+"'"),t}function i(t,e,r){return"SELECT ?subject WHERE {\n      ?subject wdt:"+t+" "+e+" .\n    }\n    LIMIT "+r}function o(t,e,r){return"SELECT ?subject WHERE {\n    ?subject wdt:"+t+" ?value .\n    FILTER (lcase(?value) = "+e.toLowerCase()+")\n  }\n  LIMIT "+r}var u=t("../helpers/helpers"),s=t("./sparql_query");e.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=r.limit,a=r.caseInsensitive;u=u||1e3;var l=a?o:i,f=n(e),c=l(t,f,u);return s(c)}},{"../helpers/helpers":1,"./sparql_query":15}],12:[function(t,e,r){"use strict";var n=t("../utils/build_url"),i=t("../utils/utils"),o=i.isPlainObject,u=i.forceArray,s=i.shortLang;e.exports=function(t,e,r,i,l){if(o(t)){var f=t;t=f.titles,e=f.sites,r=f.languages,i=f.props,l=f.format}if(l=l||"json",!(t&&t.length>0))throw new Error("no title provided");e&&e.length>0||(e=["enwiki"]),t=u(t),e=u(e).map(a),i=u(i);var c={action:"wbgetentities",titles:t.join("|"),sites:e.join("|"),format:l};return r&&(r=u(r).map(s),c.languages=r.join("|")),i&&i.length>0&&(c.props=i.join("|")),n(c)};var a=function(t){return 2===t.length?t+"wiki":t}},{"../utils/build_url":16,"../utils/utils":18}],13:[function(t,e,r){"use strict";var n=t("../utils/build_url"),i=t("../utils/utils"),o=i.isPlainObject;e.exports=function(t,e,r,i,u){if(o(t)){var s=t;t=s.search,e=s.language,r=s.limit,i=s.format,u=s.uselang}if(!(t&&t.length>0))throw new Error("search can't be empty");return e=e||"en",u=u||e,r=r||"20",i=i||"json",n({action:"wbsearchentities",search:t,language:e,limit:r,format:i,uselang:u})}},{"../utils/build_url":16,"../utils/utils":18}],14:[function(t,e,r){"use strict";var n=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports=function(t){"string"==typeof t&&(t=JSON.parse(t));var e=t.head.vars,r=t.results.bindings;if(1!==e.length){var u=p(e),s=n(u,2),a=s[0],l=s[1];return r.map(y(a,l))}var f=function(){var t=e[0];return{v:r.map(function(e){return o(e[t])}).filter(function(t){return null!=t})}}();if("object"===("undefined"==typeof f?"undefined":i(f)))return f.v};var o=function(t){if(t){var e=t.datatype;e=e&&e.replace("http://www.w3.org/2001/XMLSchema#","");var r=u[t.type]||a(e);return r(t)}},u={uri:function(t){return c(t.value)},bnode:function(){return null}},s=function(t){return parseFloat(t.value)},a=function(t){return t=t&&t.replace("http://www.w3.org/2001/XMLSchema#",""),l[t]||f},l={decimal:s,integer:s,float:s,double:s,boolean:function(t){return"true"===t.value}},f=function(t){return t.value},c=function(t){return t.replace("http://www.wikidata.org/entity/","")},p=function(t){var e=[],r=[],n=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var a=u.value;t.indexOf(a+"Label")>-1?e.push(a):/^\w+Label$/.test(a)||r.push(a)}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return[e,r]},y=function(t,e){return function(r){var n={},i=!0,u=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var f=a.value,c=o(r[f]);if(null!=c){var p=r[f+"Label"]&&r[f+"Label"].value;n[f]={value:c,label:p}}}}catch(t){u=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(u)throw s}}var y=!0,d=!1,m=void 0;try{for(var v,b=e[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){var g=v.value;n[g]=o(r[g])}}catch(t){d=!0,m=t}finally{try{!y&&b.return&&b.return()}finally{if(d)throw m}}return n}}},{}],15:[function(t,e,r){"use strict";var n=t("../utils/utils"),i=n.fixedEncodeURIComponent;e.exports=function(t){var e=i(t);return"https://query.wikidata.org/sparql?format=json&query="+e}},{"../utils/utils":18}],16:[function(t,e,r){"use strict";var n="https://www.wikidata.org/w/api.php",i="undefined"!=typeof location&&"undefined"!=typeof document,o=t(i?"./querystring_lite":"querystring");e.exports=function(t){return i&&(t.origin="*"),n+"?"+o.stringify(t)}},{"./querystring_lite":17,querystring:21}],17:[function(t,e,r){"use strict";e.exports={stringify:function(t){var e="";for(var r in t){var n=t[r];n&&(e+="&"+r+"="+n)}return e=e.slice(1),encodeURI?encodeURI(e):e}}},{}],18:[function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports={shortLang:function(t){return t.toLowerCase().split(/[^a-z]/)[0]},forceArray:function(t){return"string"==typeof t&&(t=[t]),t||[]},isPlainObject:function(t){return!(!t||"object"!==("undefined"==typeof t?"undefined":n(t))||t instanceof Array)},fixedEncodeURIComponent:function(t){return encodeURIComponent(t).replace(/[!'()*]/g,i)}};var i=function(t){return"%"+t.charCodeAt(0).toString(16)}},{}],19:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,o){e=e||"&",r=r||"=";var u={};if("string"!=typeof t||0===t.length)return u;var s=/\+/g;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var f=0;f<l;++f){var c,p,y,d,m=t[f].replace(s,"%20"),v=m.indexOf(r);v>=0?(c=m.substr(0,v),p=m.substr(v+1)):(c=m,p=""),y=decodeURIComponent(c),d=decodeURIComponent(p),n(u,y)?i(u[y])?u[y].push(d):u[y]=[u[y],d]:u[y]=d}return u};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],20:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(u(t),function(u){var s=encodeURIComponent(i(u))+r;return o(t[u])?n(t[u],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[u]))}).join(e):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],21:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":19,"./encode":20}]},{},[8])(8)});
